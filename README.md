# ldap_printer
LDAP based printer 

## Installation
- Make sure you have sudo permissions and python 2 installed. This project is written only for linux based OS
- Make sure firefox is installed in system and can be triggered using `firefox` command
- Install dependencies

  ```bash
  sudo apt-get install python-dev python-pip libcups2-dev
  ```
- Install python dependencies by running `sudo pip install -r requirements.txt`
- Run installation script as `bash install.sh` or `./install.sh`
- Add `/usr/local/ldap_printer` in `/etc/sudoers` secure path.
- Delete this directory

## Usage
- To print a file run command `ldap_print`
- To get account information of all users run `sudo rootaccount.py`. You need to be a sudo user.
  - Pass first argument as filename. If it is not present then filename 'printer_account.csv' will be used.
  - Pass second argument as month for which you want accounting info. This should be integer. By default it is 
  current month
  - It generates two files filename and verbose_filename. filename has compact data i.e. total prints per user. 
  vebose_filename has details of all individual print events.

## Development
- Install python development kit by 

  ```bash
     sudo apt-get install python-dev python-pip libcups2-dev
  ```

### virtualenv configuration
- **Ignore these steps if you're familiar with virtualenv**
- Install necessary dependencies by running `sudo pip install virtualenv virtualenvwrapper`
- Add following lines to your `~/.bashrc`

  ```bash
    
  export WORKON_HOME=~/.envs
  mkdir -p $WORKON_HOME
  source /usr/local/bin/virtualenvwrapper.sh
  ```
- Create virtualenv by `mkvirtualenv ldap-printer`. Deactivate by `deactivate` and again activate by `workon ldap-printer`

### Installation for development
- Install Python dependencies by running `pip install -r requirements.txt`
- cpp wrapper is generated by running `python generate_wrapper.py`. Compile it with `g++` to get executable file
- Directly run application by `python printmain.py`


## Uninstall
- Delete project directory from `/usr/local/ldap_printer`
- Remove environment variable from `/etc/profile.d/ldap_printer.sh`
